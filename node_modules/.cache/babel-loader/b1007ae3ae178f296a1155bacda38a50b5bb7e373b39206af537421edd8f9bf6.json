{"ast":null,"code":"var _jsxFileName = \"/Users/rafmillan/react/spotify-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from \"react\";\nimport Header from \"./components/Header\";\nimport Dashboard from \"./components/Dashboard\";\nimport LoginButton from \"./components/LoginButton\";\nimport Footer from \"./components/Footer\";\nimport { CLIENT_ID, REDIRECT_URI, AUTH_ENDPOINT, RESPONSE_TYPE } from \"./consts\";\nimport \"./styles/App.css\";\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useLocalStorage(key, initialValue) {\n  _s();\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.log(error);\n      return initialValue;\n    }\n  });\n  const setValue = value => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return [storedValue, setValue];\n}\n_s(useLocalStorage, \"453BCOsPAHV1f7NiCT6RqgDbZ5M=\");\nexport default function App() {\n  _s2();\n  const [token, setToken] = useLocalStorage(\"token\", \"\");\n  useEffect(() => {\n    const hash = window.location.hash;\n    if (!token && hash) {\n      const newToken = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n      setToken(newToken);\n      window.location.hash = \"\";\n    }\n  }, [setToken, token]);\n  const logout = () => {\n    setToken(\"\");\n    window.localStorage.removeItem(\"user\");\n    window.localStorage.removeItem(\"topSongs\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !token ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(LoginButton, {\n        authEndpoint: AUTH_ENDPOINT,\n        clientId: CLIENT_ID,\n        redirectUri: REDIRECT_URI,\n        response_type: RESPONSE_TYPE\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Dashboard, {\n        token: token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"logout-button\",\n        onClick: logout,\n        children: \"back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n_s2(App, \"VAcLyg1o02vMx4Mi2qIUQpGPINE=\", false, function () {\n  return [useLocalStorage];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Header","Dashboard","LoginButton","Footer","CLIENT_ID","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","useEffect","useState","jsxDEV","_jsxDEV","useLocalStorage","key","initialValue","_s","storedValue","setStoredValue","item","window","localStorage","getItem","JSON","parse","error","console","log","setValue","value","valueToStore","Function","setItem","stringify","App","_s2","token","setToken","hash","location","newToken","substring","split","find","elem","startsWith","logout","removeItem","children","fileName","_jsxFileName","lineNumber","columnNumber","authEndpoint","clientId","redirectUri","response_type","className","onClick","_c","$RefreshReg$"],"sources":["/Users/rafmillan/react/spotify-app/src/App.js"],"sourcesContent":["import React from \"react\"\nimport Header from \"./components/Header\"\nimport Dashboard from \"./components/Dashboard\"\nimport LoginButton from \"./components/LoginButton\"\nimport Footer from \"./components/Footer\"\nimport { CLIENT_ID, REDIRECT_URI, AUTH_ENDPOINT, RESPONSE_TYPE } from \"./consts\"\nimport \"./styles/App.css\"\n\nimport { useEffect, useState } from \"react\"\nfunction useLocalStorage(key, initialValue) {\n    const [storedValue, setStoredValue] = useState(() => {\n        try {\n            const item = window.localStorage.getItem(key)\n            return item ? JSON.parse(item) : initialValue\n        } catch (error) {\n            console.log(error)\n            return initialValue\n        }\n    })\n\n    const setValue = (value) => {\n        try {\n            const valueToStore = value instanceof Function ? value(storedValue) : value\n            setStoredValue(valueToStore)\n            window.localStorage.setItem(key, JSON.stringify(valueToStore))\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    return [storedValue, setValue]\n}\n\nexport default function App() {\n    const [token, setToken] = useLocalStorage(\"token\", \"\")\n\n    useEffect(() => {\n        const hash = window.location.hash\n        if (!token && hash) {\n            const newToken = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1]\n            setToken(newToken)\n            window.location.hash = \"\"\n        }\n    }, [setToken, token])\n\n    const logout = () => {\n        setToken(\"\")\n        window.localStorage.removeItem(\"user\")\n        window.localStorage.removeItem(\"topSongs\")\n    }\n\n    return (\n        <div>\n            {!token ?\n                <div>\n                    <Header />\n                    <LoginButton\n                        authEndpoint={AUTH_ENDPOINT}\n                        clientId={CLIENT_ID}\n                        redirectUri={REDIRECT_URI}\n                        response_type={RESPONSE_TYPE}\n                    />\n                    <Footer />\n                </div> :\n                <div>\n                    <Header />\n                    <Dashboard token={token} />\n                    <button className=\"logout-button\" onClick={logout}>back</button>\n                    <Footer />\n                </div>\n            }\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}